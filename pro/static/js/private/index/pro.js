var project={},objs=new obje;project.init=function(){this.record=1,this.CordLengh=0,this.coin="BTC",this.id="37",this.ago="BTC",this.CordLengh=0,this.m=1,this.mm=1,this.mLength=0,this.mmLength=0,this.adNotClick(),this.cheight(),this.iconClick(),this.initData(),this.scrooBot(),1==$("#hidden").val()&&(this.meOrders(),this.meCount()),this.getCoins(),this.buy(),this.sell(),this.delOrder()},project.delOrder=function(){$("#abut3").on("click",".icondel",function(){var t=$(this).attr("data-orid"),e=$(this);$.ajax({url:"/Home/trade/cancel",type:"get",data:{order_id:t},success:function(t){1==t.status&&(e.parents("ul").remove(),alert(t.info))}})})},project.sell=function(){$(".but2").on("click",function(){if($("#buypri").val().length<=0||$("#buynum").val().length<=0)return alert($("#mess").attr("data-error")),!1;$.ajax({url:"/Home/trade/sell",type:"post",data:{sellprice:$("#buypri").val(),sellnum:$("#buynum").val(),currency_id:project.id},success:function(t){1==t.status?alert($("#mess").attr("data-ok")):alert(t.info)}})}),$("#buypri").on("change",function(){$("#buysum").html(objs.fds($("#buypri").val(),$("#buynum").val()))}),$("#buynum").on("change",function(){$("#buysum").html(objs.fds($("#buypri").val(),$("#buynum").val()))})},project.buy=function(){$(".but1").on("click",function(){if($("#buypri").val().length<=0||$("#buynum").val().length<=0)return alert($("#mess").attr("data-error")),!1;$.ajax({url:"/Home/trade/buy",type:"post",data:{buyprice:$("#buypri").val(),buynum:$("#buynum").val(),currency_id:project.id},success:function(t){1==t.status?alert($("#mess").attr("data-ok")):alert(t.info)}})})},project.getCoins=function(){$.ajax({url:"/Home/orders/CurrencyInfo",type:"post",data:{p:project.coinCount},success:function(t){for(var e="",a="",r=0;r<t.data.length;r++)e+="<li>"+t.data[r].currency_mark+"/BTC</li>",a+="<li><p>"+t.data[r].currency_name+" / USDT (<span>"+t.data[r].latest_price+"</span>)</p><p>24小时交易量：<span>"+t.data[r].one_day_trades+"</span> <span>"+t.data[r].up_or_down+"%</span></p></li>";$(".iconSelect>ul").append(e),$("#ucoins").append(a)}})},project.meOrders=function(){$.ajax({url:"/Home/trade/myOrders",type:"get",data:{currency_id:project.id},success:function(t){for(var e="",a=0;a<t.data.length;a++)e+="<ul><li>"+t.data[a].add_time+"</li><li>"+t.data[a].price+"</li><li>"+t.data[a].num+"</li><li>"+t.data[a].sum+'</li><li><svg class="icon icondel" aria-hidden="true" data-orid="'+t.data[a].orders_id+'"><use xlink:href="#icon-guanbi"></use></svg></li></ul>';$("#abut3>div").eq(0).append(e),$("#abut3").nanoScroller()}})},project.meCount=function(){$.ajax({url:"/Home/trade/tradeRecords",type:"get",data:{currency_id:project.id,sign:"my"},success:function(t){for(var e="",a=0;a<t.data.length;a++)e+="<ul><li>"+t.data[a].add_time+"</li><li>"+t.data[a].price+"</li><li>"+t.data[a].num+"</li><li>"+t.data[a].money+"</li></ul>";$("#abut4>div").eq(0).append(e),$("#abut4").nanoScroller()}})},project.setInter=function(){setInterval(function(){$.ajax({url:"/Home/trade/tradeRecords",dataType:"json",type:"get",data:{currency_id:project.id,p:0},success:function(t){if(0==t.count)return!1;if(t.count>project.CordLengh){for(var e="",a=0;a<t.count-project.CordLengh;a++)e+="<ul><li>"+t.data[a].add_time+"</li><li>"+t.data[a].price+"</li><li>"+t.data[a].num+"</li><li>"+t.data[a].money+"</li></ul>";$("#abut5>div").eq(0).prepend(e),project.CordLengh=t.count,$("#abut5").nanoScroller()}}}),$.ajax({url:"/Home/trade/orderRecords",type:"get",dataType:"json",data:{currency_id:project.id,type:"buy",p:0},success:function(t){if(0==t.count)return!1;if(t.count>project.mLength){for(var e="",a=0;a<t.count-project.mLength;a++)e+="<ul><li>"+t.data[a].total+"</li><li>"+t.data[a].num+"</li><li>"+t.data[a].price+"</li></ul>";$("#abut1>div").eq(0).prepend(e),project.mLength=t.count,$("#abut1").nanoScroller()}}}),$.ajax({url:"/Home/trade/orderRecords",type:"get",dataType:"json",data:{currency_id:project.id,type:"sell",p:0},success:function(t){if(0==t.count)return!1;if(t.count>project.mmLength){for(var e="",a=0;a<t.count-project.mmLength;a++)e+="<ul><li>"+t.data[a].total+"</li><li>"+t.data[a].num+"</li><li>"+t.data[a].price+"</li></ul>";$("#abut2>div").eq(0).prepend(e),project.mmLength=t.count,$("#abut2").nanoScroller()}}})},1e3)},project.scrooBot=function(){$("#abut5").on("scrollend",function(t){if(project.CordLengh<30||(project.CordLengh-30)/15<=project.record-1)return!1;$.ajax({url:"/Home/trade/tradeRecords",dataType:"json",type:"get",data:{currency_id:project.id,p:project.record},success:function(t){if(0==t.count)return!1;for(var e="",a=0;a<t.data.length;a++)e+="<ul><li>"+t.data[a].price+"</li><li>"+t.data[a].num+"</li><li>"+t.data[a].add_time.split(" ")[1]+"</li></ul>";$("#abut5>div").eq(0).append(e),project.record++,project.CordLengh=t.count,$("#abut5").nanoScroller()}})}),$("#abut1").on("scrollend",function(t){if(project.mLength<15||project.mLength/15<=project.m-1)return!1;$.ajax({url:"/Home/trade/orderRecords",type:"get",dataType:"json",data:{currency_id:project.id,type:"buy",p:project.m},success:function(t){if(0==t.count)return!1;for(var e="",a=0;a<t.data.length;a++)e+="<ul><li>"+t.data[a].total+"</li><li>"+t.data[a].num+"</li><li>"+t.data[a].price+"</li></ul>";$("#abut1>div").eq(0).append(e),project.m++,project.mLength=t.count,$("#abut1").nanoScroller()}})}),$("#abut2").on("scrollend",function(t){if(project.mmLength<15||project.mmLength/15<=project.mm-1)return!1;$.ajax({url:"/Home/trade/orderRecords",type:"get",dataType:"json",data:{currency_id:project.id,type:"sell",p:project.mm},success:function(t){if(0==t.count)return!1;for(var e="",a=0;a<t.data.length;a++)e+="<ul><li>"+t.data[a].total+"</li><li>"+t.data[a].num+"</li><li>"+t.data[a].price+"</li></ul>";$("#abut2>div").eq(0).append(e),project.mm++,project.mmLength=t.count,$("#abut2").nanoScroller()}})})},project.initData=function(){var t=objs.getUrl();void 0!=t&&(project.coin=t.coin,project.ago=t.ago,project.id=t.id),$.ajax({url:"/Home/trade/tradeRecords",dataType:"json",type:"get",data:{currency_id:project.id,p:project.record,offset:45},success:function(t){if(0==t.count)return!1;for(var e="",a=0;a<t.data.length;a++)e+="<ul><li>"+t.data[a].price+"</li><li>"+t.data[a].num+"</li><li>"+t.data[a].add_time.split(" ")[1]+"</li></ul>";$("#abut5>div").eq(0).append(e),project.record++,project.CordLengh=t.count,$("#abut5").nanoScroller()}}),$.ajax({url:"/Home/trade/orderRecords",type:"get",dataType:"json",data:{currency_id:project.id,type:"buy",p:project.m},success:function(t){if(0==t.count)return!1;for(var e="",a=0;a<t.data.length;a++)e+="<ul><li>"+t.data[a].total+"</li><li>"+t.data[a].num+"</li><li>"+t.data[a].price+"</li></ul>";$("#abut1>div").eq(0).append(e),project.m++,project.mLength=t.count,$("#abut1").nanoScroller()}}),$.ajax({url:"/Home/trade/orderRecords",type:"get",dataType:"json",data:{currency_id:project.id,type:"sell",p:project.mm},success:function(t){if(0==t.count)return!1;for(var e="",a=0;a<t.data.length;a++)e+="<ul><li>"+t.data[a].total+"</li><li>"+t.data[a].num+"</li><li>"+t.data[a].price+"</li></ul>";$("#abut2>div").eq(0).append(e),project.mm++,project.mmLength=t.count,$("#abut2").nanoScroller()}})},project.iconClick=function(){$(".idsa").on("click",function(){0==$(".iconSelect").height()?$(".iconSelect").css("height","auto"):$(".iconSelect").css("height","0")}),$(".iconSelect li").on("click",function(){$(".iconSelect").css("height","0")})},project.adNotClick=function(){$(".ech span").on("click",function(){$(this).addClass("thisEch").siblings().removeClass("thisEch"),$(".echTab").find("div").eq($(this).index()).css("display","block").siblings().css("display","none")}),$(".users span").on("click",function(){$(this).addClass("thison").siblings().removeClass("thison"),$(".userson>div").eq($(this).index()).css("display","block").siblings().css("display","none")})},project.cheight=function(){var t=$(window).height(),e=$(window).width();return t-=77,e>=601&&e<=1e3&&($("#abut3").css("height",t-530+"px"),$("#abut4").css("height",t-530+"px")),!(e<=1e3)&&(!(t<=660)&&($(".template1").css("height",t+"px"),$("#abut5").css("height",t-74.5+"px"),$("#abut3").css("height",t-457.5+"px"),$("#abut4").css("height",t-457.5+"px"),$("#abut2").css("height",(t-121)/2+"px"),$("#abut1").css("height",(t-121)/2+"px"),void 0))},project.init();